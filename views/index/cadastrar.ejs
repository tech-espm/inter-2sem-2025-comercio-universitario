<div class="container-fluid">

	<div class="row">

		<div class="col-sm-6">
			<div class="mb-3">
				<label class="form-label" for="inputNome">Nome</label>
				<input class="form-control" type="text" maxlength="100" id="inputNome" />
			</div>
		</div>

		<div class="col-sm-6">
			<div class="mb-3">
				<label class="form-label" for="inputDescricao">Descrição</label>
				<input class="form-control" type="text" maxlength="200" id="inputDescricao" />
			</div>
		</div>

	</div>

	<div class="text-center">
		<button type="button" class="btn btn-primary" onclick="cadastrarProduto()">Cadastrar Produto</button>
	</div>

</div>

<script>

	async function cadastrarProduto() {

		let inputNome = document.getElementById("inputNome");
		let inputDescricao = document.getElementById("inputDescricao");

		let nome = inputNome.value;
		let descricao = inputDescricao.value;

		if (!nome) {
			alert("Nome inválido!");
			return;
		}

		if (!descricao) {
			alert("Descrição inválida!");
			return;
		}

		let produto = {
			"nome": nome,
			"descricao": descricao
		};

		try {

			let response = await fetch("/api/cadastrar", {
				method: "POST",
				body: JSON.stringify(produto),
				headers: {
					"content-type": "application/json"
				}
			});

			if (!response.ok) {
				alert("Ocorreu um erro ao criar o produto :(");
				return;
			}

			inputNome.value = "";
			inputDescricao.value = "";

			alert("Produto criado com sucesso!");

		} catch (ex) {
			alert("Ocorreu um erro de rede ao criar o produto: " + ex.message)
		}

	}

</script>